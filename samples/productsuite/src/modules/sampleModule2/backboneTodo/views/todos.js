define(["text!../templates/todos.html","../common"],function(e,t){var n=Backbone.View.extend({tagName:"li",template:_.template(e),events:{"click .toggle":"togglecompleted","dblclick label":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.model.on("change",this.render,this),this.model.on("destroy",this.remove,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.toggleClass("completed",this.model.get("completed")),this.input=this.$(".edit"),this},togglecompleted:function(){this.model.toggle()},edit:function(){this.$el.addClass("editing"),this.input.focus()},close:function(){var e=this.input.val().trim();e?this.model.save({title:e}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(e){e.keyCode===t.ENTER_KEY&&this.close()},clear:function(){this.model.destroy()}});return n})